\documentclass[11pt]{article}
\usepackage[english]{babel}
\usepackage{listings}
 
\lstset{
language=sh
,breaklines=true
,frame=single
,tabsize=2
,basicstyle=\ttfamily
, showstringspaces=false}

\newcommand{\io}[1]{\textbf{#1}}

\title{SORTES - Clock}
\author{Dieter Castel (0256149) \\ Jonas Devlieghere (0256709)}
\date{\today}
 
\begin{document}
\maketitle
\newpage

\tableofcontents
\newpage

\section{User Documentation}
Two buttons allow the user to interact with the device. 
The bottommost is \io{button 1} and is used to browse trough a items such as numbers or menu items.
The topmost is \io{button 2} and is generally used to confirm your selection or to enter configuration mode.

\subsection{Configuration Mode}
To enter configuration mode from regular mode (i.e. the clock is displayed) press \io{button 2}. 
A menu will display allowing you to change the current time and alarm or quit configuration mode.
When the devices powers on, you will automatically enter configuration mode since the current time has not been set. 
This means you will not have to press \io{button 2} to enter configuration mode. 

\subsection{Setting the Clock}
To configure the current time, press \io{button 2} to enable configuration mode if not yet enabled. 
Press \io{button 1} until \io{Set time?} is displayed. 
Confirm this choice by pressing \io{button 2}.
You will be able to configure the clock in 3 simple steps respectively setting the hours, minutes and seconds. 
Use \io{button 1} to increase the value of each property. 
The input will automatically wrap around when the maximum value is reached.
For example, pressing {button 1} when the current hour value is 23 will yield a value of 0. 
Confirm each input value by pressing {button 2}. When all values are set you will return to the configuration menu.

\subsection{Setting the Alarm}
Configuring the alarm is almost identical to configuring the current time. Press \io{button 2} to enter configuration mode, navigate to \io{Set alarm?} by pressing \io{button 1} and press \io{button 2} once more. 
Follow the steps mentioned above to configure the alarm time as desired.

\section{System Documentation}
We provided a makefile to compile the source code. Run the following command:
\begin{lstlisting}
$ make clock 
\end{lstlisting}
To deploy the clock.hex file to the PIC a shell script is available. The script will start tftp and wait for input from the user. 
\begin{lstlisting}
$ ./deploy.sh 
\end{lstlisting}
Enter the following command but do not press return just yet. Reset the PIC and wait for the corresponding LED on the router to light up, then press return.
\begin{lstlisting}
put clock.hex
\end{lstlisting}
When all of this succeeds, you'll see something like this. The amount of time and bytes may differ.
\begin{lstlisting}
$ make clock 
#################### BUILD INIT ####################
sdcc -mpic16 -p18f97j60 -L /usr/local/lib/pic16 -llibio18f97j60.lib -llibdev18f97j60.lib -llibc18f.lib -L include objects/clock.o objects/LCDBlocking.o objects/newtime.o
message: using default linker script "/usr/local/share/gputils/lkr/18f97j60.lkr"
#################### BUILD DONE ####################
$ ./deploy.sh 
starting tftp to 192.168.97.6
put clock.hex
tftp> tftp> Sent 35956 bytes in 2.1 seconds
\end{lstlisting}

\section{System Design}


\appendix

\section{Source Code}
\lstinputlisting[language=C, caption={strings header file}, label=strings.h]{../src/strings.h}
\lstinputlisting[language=C, caption={clock body file}, label=clock.h]{../src/clock.c}
\lstinputlisting[language=C, caption={clockio header file}, label=clock.h]{../src/clockio.h}
\lstinputlisting[language=C, caption={clockio body file}, label=clock.h]{../src/clockio.c}
\lstinputlisting[language=C, caption={time header file}, label=time.h]{../src/time.h}
\lstinputlisting[language=C, caption={time body file}, label=time.h]{../src/time.c}
\end{document}
